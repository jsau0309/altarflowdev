# ==========================================
# AltarFlow Environment Variables
# ==========================================
# Last Updated: 2025-08-08
# Production Readiness: 85%

# ------------------------------------------
# Core Application
# ------------------------------------------
NEXT_PUBLIC_APP_URL=http://localhost:3000  # CRITICAL: Change to your production URL (e.g., https://altarflow.com)

# ------------------------------------------
# Database Configuration (Supabase)
# ------------------------------------------
# IMPORTANT: These are configured in prisma/.env
# DATABASE_URL - Connection pooling URL (port 6543)
# DIRECT_URL - Direct connection for migrations (port 5432)
# 
# Production settings (Supabase Pro):
# DATABASE_URL="postgresql://[user]:[password]@[host].pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=30&pool_timeout=30"
# DIRECT_URL="postgresql://[user]:[password]@[host].supabase.com:5432/postgres"

# Supabase Public Keys (for browser/middleware access)
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...  # For API routes
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ------------------------------------------
# Authentication (Clerk)
# ------------------------------------------
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_xxxxxx  # Use pk_live_ for production
CLERK_SECRET_KEY=sk_test_xxxxxx  # Use sk_live_ for production
CLERK_WEBHOOK_SECRET=whsec_xxxxxx  # From Clerk Dashboard > Webhooks

# Clerk Redirect URLs
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/signin
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/signup
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/after-signup
NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/dashboard
NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/invitation-pending

# ------------------------------------------
# Payment Processing (Stripe)
# ------------------------------------------
STRIPE_SECRET_KEY=sk_test_xxxxx  # Use sk_live_ for production
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx  # Use pk_live_ for production
STRIPE_WEBHOOK_SECRET=whsec_xxxxx  # CRITICAL: From Stripe Dashboard > Webhooks

# Stripe Payment Links (SaaS Subscriptions)
NEXT_PUBLIC_STRIPE_MONTHLY_LINK=https://buy.stripe.com/test_xxxxx  # $99/month plan
NEXT_PUBLIC_STRIPE_ANNUAL_LINK=https://buy.stripe.com/test_xxxxx   # $830/year plan

# ------------------------------------------
# Email Service (Resend)
# ------------------------------------------
RESEND_API_KEY=re_xxxxx
RESEND_FROM_EMAIL='Altarflow <hello@altarflow.com>'  # Use your verified domain
YOUR_VERIFIED_RESEND_DOMAIN=altarflow.com  # Your verified domain in Resend
RESEND_WEBHOOK_SECRET=whsec_xxxxx  # From Resend Dashboard > Webhooks

# ------------------------------------------
# SMS Service (Twilio)
# ------------------------------------------
TWILIO_ACCOUNT_SID=ACxxxxx
TWILIO_AUTH_TOKEN=xxxxx
TWILIO_PHONE_NUMBER=+1xxxxxxxxxx  # Your Twilio phone number
TWILIO_VERIFY_SERVICE_SID=VAxxxxx  # From Twilio Verify Service

# ------------------------------------------
# AI Services
# ------------------------------------------
# OpenAI (Required for AI features)
OPENAI_API_KEY=sk-proj-xxxxx

# Anthropic Claude (Optional - for enhanced email generation)
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Gemini API (Receipt OCR)
GEMINI_API_KEY=your_api_key_here

# ------------------------------------------
# Third-Party Integrations
# ------------------------------------------
# Mindee OCR (Receipt Scanning)
MINDEE_API_KEY=xxxxx

# Topol.io Email Editor
NEXT_PUBLIC_TOPOL_API_KEY=xxxxx  # From https://app.topol.io

# Typeform (Waitlist)
NEXT_PUBLIC_TYPEFORM_ID=xxxxxx  # Your Typeform ID

# Calendly (Demo Booking)
NEXT_PUBLIC_CALENDLY_URL=calendly.com/yourcompany/demo  # Without https://

# ------------------------------------------
# Security & Monitoring (Optional but Recommended)
# ------------------------------------------
# Cron Job Authentication
CRON_SECRET=your-random-secret-string-here  # Generate a random string

# Sentry Error Tracking (Recommended for Production)
# SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx

# ------------------------------------------
# NOTES FOR PRODUCTION DEPLOYMENT
# ------------------------------------------
# 1. Database: Use connection_limit=30 for Supabase Pro (10 for free tier)
# 2. Stripe: Use production webhook endpoints and secrets
# 3. Domain: Update NEXT_PUBLIC_APP_URL before printing QR codes
# 4. Security: All webhook secrets must be from production dashboards
# 5. Email: Verify domain in Resend with SPF, DKIM, DMARC records
# 6. SSL: Ensure production uses HTTPS for all URLs
# 7. Monitoring: Set up Sentry or similar error tracking
# 8. Backup: Configure database backups in Supabase

# For detailed deployment instructions, see:
# /docs/versions/v1/DEPLOYMENT_CHECKLIST_V1.md
